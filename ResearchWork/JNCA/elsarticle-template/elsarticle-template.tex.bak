\documentclass[review]{elsarticle}

\usepackage{lineno,hyperref}
\usepackage{algorithm}
\usepackage{algorithmic}
\usepackage{amsmath}
\usepackage{multirow}
\renewcommand{\algorithmicrequire}{\textbf{Input:}}
\renewcommand{\algorithmicensure}{\textbf{Begin:}}
\renewcommand{\algorithmicoutput}{\textbf{Output:}}

\modulolinenumbers[5]



\journal{Journal of Network and Computer Applications}

%%%%%%%%%%%%%%%%%%%%%%%
%% Elsevier bibliography styles
%%%%%%%%%%%%%%%%%%%%%%%
%% To change the style, put a % in front of the second line of the current style and
%% remove the % from the second line of the style you would like to use.
%%%%%%%%%%%%%%%%%%%%%%%

%% Numbered
%\bibliographystyle{model1-num-names}

%% Numbered without titles
%\bibliographystyle{model1a-num-names}

%% Harvard
%\bibliographystyle{model2-names.bst}\biboptions{authoryear}

%% Vancouver numbered
%\usepackage{numcompress}\bibliographystyle{model3-num-names}

%% Vancouver name/year
%\usepackage{numcompress}\bibliographystyle{model4-names}\biboptions{authoryear}

%% APA style
%\bibliographystyle{model5-names}\biboptions{authoryear}

%% AMA style
%\usepackage{numcompress}\bibliographystyle{model6-num-names}

%% `Elsevier LaTeX' style
\bibliographystyle{elsarticle-num}
%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

\begin{frontmatter}

\title{TOUSE: A Fair User Selection Mechanism Based on Dynamic Time Warping for MU-MIMO Networks}
%\tnotetext[mytitlenote]{Fully documented templates are available in the elsarticle package on \href{http://www.ctan.org/tex-archive/macros/latex/contrib/elsarticle}{CTAN}.}

%\author{\IEEEauthorblockN{Zhaoshu Tang, Zhenquan Qin, Ming Zhu\thanks{Ming Zhu is the corresponding author in Dalian University of Technology.},\\
%Jian Fang, Lei Wang, Honglian Ma}
%\IEEEauthorblockA{School of Software,\\
%Dalian University of Technology, China\\
%tang.zhaoshu@mail.dlut.edu.cn, qzq@dlut.edu.cn, zhuming@dlut.edu.cn, \\
%fangjian@mail.dlut.edu.cn, lei.wang@dlut.edu.cn, mhl@dlut.edu.cn } }



%% Group authors per affiliation:
\author[author1]{Zhaoshu Tang\fnref{myfootnote}}
%\address{School of Software, Dalian University of Technology, China}
\fntext[myfootnote]{Email: tang.zhaoshu@mail.dlut.edu.cn}
%\fntext[myfootnote]{Since 1880.}

%% or include affiliations in footnotes:
\author[author1]{ Zhenquan Qin}
%\ead[url]{www.elsevier.com}

\author[author1]{Ming Zhu\corref{mycorrespondingauthor}}
\cortext[mycorrespondingauthor]{Corresponding author}
\ead{zhuming@dlut.edu.cn}



\author[author1]{\\Jian Fang}
\author[author1]{Lei Wang}
\author[author1]{Honglian Ma}
\address[author1]{School of Software, Dalian University of Technology, China}



\begin{abstract}
Multi-user Multiple-Input and Multiple-Output (MU-MIMO) has potential for prominently enhancing the capacity of wireless network by simultaneously transmitting to multiple users. User selection is an unavoidable problem which bottlenecks the gain of MU-MIMO to a great extent. Major state-of-the-art works focused on improving network performance by using Channel State Information (CSI), however, the overhead of CSI feedback becomes unacceptable when the user population is large. Some work does well in balancing tradeoff between complexity and achievable capacity but lack of consideration of fairness. Current work universally ignore the rational utilizing of time resource, bring the improvement of network throughput to a standstill. In this paper, we propose TOUSE, a scalable and fair user selection scheme for MU-MIMO. The core design of TOUSE is its dynamic time warping based user selection mechanism for downlink MU-MIMO, which could make full use of concurrent transmitting time. TOUSE also presents a novel data-rate estimation method without any CSI feedback, which provide supports for user selection. Simulation result shows that TOUSE significantly outperforms traditional contention-based user selection schemes in both throughput and fairness in indoor condition.
\end{abstract}

\begin{keyword}
MU-MIMO\sep user selection\sep fairness \sep dynamic time warping
%\MSC[2010] 00-01\sep  99-00
\end{keyword}

\end{frontmatter}

\linenumbers

\section{Introduction}

Multi-user Multiple Input Multiple Output (MU-MIMO) have attracted a huge amount of attention already because it enables better spatial reuse. The network capacity is enhanced by send frames
to multiple single-stream users concurrently. Prior to 802.11ac, traditional 802.11 protocol limits every transmission was only sent to a single user, which cannot full utilizing spatial resources supported by multiple antennas AP. Multi-user transmissions are a new technology within 802.11. By using MU-MIMO \cite{choi2004transmit}, AP is equipped with multiple antennas, and could transmit to multiple users at one time. Due to these abilities, MU-MIMO has the potential to change the way Wi-Fi networks are built and achieve improved capacity gains.

A MU-MIMO downlink system, in theory, its capacity gains increases linearly with the number of transmit and receive antennas. But in practice, the number of antennas is limited for several reasons, and the inter-user interference could not be ignored. These lead a series of important problems emerged. First, how an AP select a beamforming group of users which could transmit simultaneously. Second, how to determine the size of the beamforming group. Different beamforming group selection lead to variant transmitting rate, then influence the overall network performance. Unwise selecting method may results in a huge waste of space-time at every single transmitted slot, and causes the problems of fairness and complexities. To make an optimal selection, we should choose a metric like sum rate as a criterion to process the feedback information like CSI (Channel State Information) or SNR (Signal-Noise Ratio), design an efficient scheduling scheme based on various data we obtained.

Substantial research \cite{gross2012scheduling} has provided the solving method to the user selection problem for MU-MIMO. Most solutions select the optimal beamforming groups based on understanding the full CSI of all the potential user. CSI presents the characteristics of the channel including fading distribution, average channel gain and spatial correlation, all are important to beamfroming group select. However, CSI is calculated by estimating the training sequence from AP, then users feedback it to the AP. Reducing the CSI overhead becomes an important issue in MU-MIMO since this is a long and complexity process \cite{xie2014scalable}. Although numerous optimization schemes of feedback are proposed, like compression algorithms \cite{xie2013adaptive}, the overhead of CSI feedback still huge sometimes and severely affect the performance of network, since the overhead grows linearly with the number of users. Even worse, infrequent CSI feedback results in outdated, which may leads to the inter-user interference. It is convenient to select beamforming group within CSI, but intolerable for MU-MIMO system with unacceptable feedback overhead.

In fact, these challenges have motivated previous works to find better possible solutions for user selection. In \cite{xie2014scalable}, the author proposed a distributed contention mechanism that singles out the best user to feedback its CSI. Narendra \cite{anand2014mode} present pre-sounding user selection algorithm using only available pre-sounding information instead of post channel sounding information, solved the problem of feedback overhead at a certain extent.

In this paper, we propose \emph{Time Optimal User Selection based on Effective SNR} (TOUSE), a scalable and fair user selection scheme for MU-MIMO networks to achieve higher capacity. To sum up, our main contributions are as follows:

\begin{itemize}
    \item We design a novel dynamic time warping based user selection
        mechanism to increasing throughput under the fairness constraint, and propose a algorithm to solve it.
    \item We adopt a low complexity feedback mechanism to obtain the available channel information and presents a novel data-rate estimation method base on the information of effective SNR \cite{halperin2011predictable} without any CSI feedback.
    \item TOUSE has ability to adapt different network channel quality, no matter low SNR region and high link qualities. It also suitable to dynamic network, since it select user after channel sounding is completed and acquiring real-time information.
    \item Finally we experimentally evaluate the performance of TOUSE. Result shows that, on average, the gain of TOUSE is $1.5\times$ over traditional Random user selection scheme in 3-antennas AP scenarios. Compared with PUMA scheme \cite{anand2014mode}, network capacity gain is similar but TOUSE provides users fair selection opportunities.
\end{itemize}

The rest of this paper is organized as follows. In Section \uppercase\expandafter{\romannumeral2}, we present background of user selection in MU-MIMO. Section \uppercase\expandafter{\romannumeral3} provides an overview of the components of TOUSE. Section \uppercase\expandafter{\romannumeral4} evaluates the performance of TOUSE with experimentation. Then we describe related work in Section \uppercase\expandafter{\romannumeral5} and Section \uppercase\expandafter{\romannumeral6} concludes the paper.



\section{BACKGROUND AND CHALLENGES}
\subsection{MU-MIMO System Model}

In a downlink MU-MIMO systems, consider a single-cell MIMO with a single base station serves for $N$ users. The base station is equipped with $M$ antennas and the client with one or more receive antennas. We assume that AP send frames to a set of selected single antenna users $S$ called beamforming group at the same time, which satisfies $K= |S|$, $K \leq M$. Due to the multi-user interference at the client side, it is essential for AP to  precode outgoing signals to minimize interference among simultaneous streams. Owing to its low complexity, AP apply ZFBF (Zero-forcing beamforming) \cite{yoo2006optimality}. In ZFBF, user streams are separated by different beamforming direction. Let $x_k$ denotes the data symbol sending to user $k$, $\boldsymbol {w}_k$ be the beamforming weight vector, and the $\boldsymbol {p}_k$ presents the transmit power. Assume $\boldsymbol {h}_k$ is the $1 \times M$ channel state vector between transmit antennas and receiver $k$. Define $\boldsymbol {\textrm{W}} = [\boldsymbol{w}_1, \boldsymbol{w}_2, ... ,\boldsymbol{w}_K]$, $S=\{s_1,s_2,...,s_K\}$, the transmitted signal $X=\sum_{k=1}^{K} \sqrt{p_k} \boldsymbol{h}_k \boldsymbol {w}_k x_k$. Then, let $n_k$ denotes the noise level of user $k$, we get the received signal vector as:
\begin{equation}\label{equation 1}
    y_k= \sqrt {p_k} \boldsymbol{h}_k \boldsymbol {w}_k x_k + \sum _{j \neq k, j\in S} \sqrt {p_j} \boldsymbol{h}_k \boldsymbol {w}_j x_j +n_k, k\in S.
\end{equation}

To eliminate the interference from other beamforming frame streams, ZFBF should satisfy the zero-interference condition: $\boldsymbol{h}_k \boldsymbol{w}_j$ for all receivers $j \in S$, $j \neq k$. So that receiver $k$ only gets its symbol $x_k$. Let the channel state matrix $\boldsymbol {\textrm{H}} = [\boldsymbol{h}^T_1,\boldsymbol{h}^T_2,...,\boldsymbol{h}^T_K]^T$ and the beamforming weight matrix $\boldsymbol {\textrm{W}} = [\boldsymbol{w}_1,\boldsymbol{w}_2,...,\boldsymbol{w}_K]$. One optimal choice of $\boldsymbol {\textrm{W}}$ that satisfies zero-interference condition is the pseudo-inverse of $\boldsymbol {\textrm{H}}$:
\begin{equation}
  \boldsymbol {\textrm{W}}=\boldsymbol {\textrm{H}}^+=\boldsymbol {\textrm{H}}^* (\boldsymbol {\textrm{H}}\boldsymbol {\textrm{H}^*})^{-1}.
\end{equation}
Thus, another problem that need to be consider is power allocation. For simplicity, we adopted ZFBF-EP scheme where the transmitter allocates equal power to its users.


\subsection{Impact of User Selection Mechanism}

From above section, the performance of ZFBF is highly dependent on the channel vectors from transmitter to receiver. When the channel vectors of different receiver is uncorrelation with each other, it is most likely to improved the network capacity gain. It was proved by the experimental \cite{aryafar2010design} for indoor wireless network. The network spatial multiplexing gain of ZFBF can be increased by a high number of transmitter antennas, whatever the location of receivers in indoor environment.

\indent Select beamforming group is one of the key issues which is related to the performance of MU-MIMO system. From Eq. (\ref{equation 1}), the SNR of each receiver depends on its group member. If one receiver's channel vector is orthogonal to another, it will cause limit interference when transmit together. The research \cite{aryafar2010design} also proved that ZFBF different SNR regions cause different capacity improved, and number of beamforming group is other factor. The optimal size of beamforming group is depends on the link state of member. The state of queue and other information should be taken into account as well.


\subsection{Challenges in User Selection}

\indent User selection is a complicated process. Although optimal transmit beamforming group can improve the network capacity, but high computational overhead is unacceptable. Before each downlink transmission, the AP needs to obtained the CSI from the users' feedback. During the feedback process, AP sends a training sequence to the target users, users calculate the CSI by the training sequence and feedback the CSI to AP one by one. Due to this mechanism, overhead by CSI feedback also increased with number of users. Research \cite{xie2014scalable} present that even with $20$ users, the channel time cost of existing schemes can be comparable to or even exceed that of actual data transmission.

There are a number of factors which a user selection mechanism should be consider. First, how to determine the size of beamforming group. In a transmission time slot, AP beamforming to send frame to a set of users $S$ and satisfy $K \leq M$. In \cite{aryafar2010design}, it proved that maybe $K=3$ have a better network performance than condition of $K=4$. The authors of \cite{anand2014mode} proposed a aggregate throughput to select the combination mode. Second is the complexity reduction. Instead of exhaustive search over all possible combination, mostly research adopt the method of local optimal to solve this problem, which performs inefficiently. It is hard to achieve both low complexity and high performance, the tradeoff between performance and complexity is essential \cite{shen2015sieve} . Other solution is to reduce the feedback overhead, which is not the way to the underlying problem. The last challenge is how to realize fairness. It is easy to improving the network throughput is to just selecting the users which have a high link quality. This solution might not be fair for all users \cite{xie2014scalable}. Sometimes, it can cause starvation for some users.



\section{TOUSE DESIGN}

\subsection{Design Overview}

The TOUSE inherits throughput fairness and low complexity of user selection, and also improve the network capacity gain. We design a new preference metric which aim to make full use of time resource and fairness user selection. Besides, instead of requires CSI feedback, TOUSE provides a mechanism that AP just obtained effective SNR from users to make user selection. This mechanism has limited time overhead compared to the CSI feedback.

Before given the detail of TOUSE, we present some available pre-sounding information. In MU-MIMO system, AP own the information of system state and queue state before channel sounding or communication. For each transmission, AP knows the hardware configuration, like available number of transmit antennas $M$, number of clients' receive antennas $K$. AP also aware of the queue state information for each users, like each user's backlog or queue size. The amount of available data directly affects the data transmission time in each transmission, which used for user selection. By leveraging this information, TOUSE design a performance metric to select optimal beamforming group. The TOUSE works as follows:

\emph{1)} First, the AP announces its intention for MU-MIMO downlink transmission through the NDP Announcement frame, and it is the time to start the MU-MIMO sounding process for users. AP random select the first user to the beamforming group, which can achieve channel access fairness.

\emph{2)} Then, each users $k$ estimates its CSI, independently based on the NDP Announcement frame. AP obtain the effective SNR feedback which is calculated by each client from the CSI. This is the first round of TOUSE user selection.

\emph{3)} In subsequent rounds, AP estimates the potential datarate for each competitors based on the effective SNR and current beamforming group. Then calculates time of data transmission for each users combined with the pre-sounding information, and get global time of transmission slot based on selected users and candidate user.

\emph{4)} Given transmission time of each data transmission and information of selected users. According to the constraint condition (describe in section D), the AP select the best candidate which can optimal total network capacity for this transmission slot.

\emph{5)} The one who is satisfies the optimal constraint, which means its could be transmit with the member of beamforming group. The AP added it to the beamforming group.

\emph{6)} Repeat steps (3)-(5) until the size of beamforming group reaches the maximum transmit number $M$, or there is none best choice left. Then, AP would terminate the user selection process.

Next, we are going to present TOUSE more detail.

\subsection{Effective SNR}

In order to accurately predict the packet delivery rate, a key point is using effective SNR (ESNR) \cite{halperin2011predictable}. It is a simple, easy to deploy, broadly useful,and accurate method. Using effective SNR makes packet delivery predictions for 802.11n MIMO rates, plus choices of transmit power and antennas. During the process, we use CSI as the piece of input, which provides the SNR values to use for each subcarrier. It is a much richer source of information than the RSSI, and provides the opportunity to develop a much more accurate model.

The effective SNR calculate is not simply the average subcarrier SNR. Instead, it is biased towards the weaker subcarrier SNRs because it is these subcarriers that produce most of the errors. We can compute the effective SNR by averaging the subcarrier BERs and then finding the corresponding SNR. That is formulate as follows:
\begin{equation}\label{}
  \textrm{BER}_{eff}=\frac{1}{S} \sum \textrm{BER}(snr_s);
\end{equation}
\begin{equation}\label{}
  \textrm{ESNR}=\textrm{BER}^{-1}(\textrm{BER}_{eff}).
\end{equation}
$\textrm{BER}^{-1}$ presents the inverse mapping, from $\textrm{BER}$ to $\textrm{SNR}$, and $S$ means number of subcarriers. We use the $\textrm{BER}_{eff}$ to denote the average $\textrm{BER}$ across subcarriers, and $snr_s$ is the SNR values of each subcarrier.



\subsection{MU-MIMO User Datarate Estimate}

In TOUSE, the first key problem is to predict the per-user packet delivery rate. We also need to estimate the $\textrm{ESNR}$ for each transmission from the channel state matrix, similar to the traditional methods. Then TOUSE obtain the data rate of each user from the $\textrm{ESNR}$ using MCS table. However, There still a challenge we should overcome. When AP transmit to multi-receivers at the same time, the inter-user interference is unavoidable. So we need to quantify this variety characteristics.

\emph{1) Traditional Rate Estimation:} One of the classic approach to calculate the aggregate capacity is using channel state matrix. The sum rate ($R$) \cite{yoo2006optimality} achieved by following scheme:
\begin{equation}\label{traditional rate est}
\begin{aligned}
  R= \max \limits_{\boldsymbol{\textrm{W}}_k,P_k} \sum _{k=1}^{K} \log{ \frac{1+ \sum_{j=1}^{K}P_j |\boldsymbol{h }_k\boldsymbol{w}_j|^2}{1+\sum_{j=1,j\neq k}^{K}P_j|\boldsymbol{h}_k\boldsymbol{w}_j|^2}} \\
  \text{ subject to } \sum_{k=1}^{K} \|{\boldsymbol{w}_k}\|^2 P_k \leq P.
\end{aligned}
\end{equation}
This method is accurate but quite complex. It requires channel state matrix as input. As mentioned before, computational overhead is unavoidable by using CSI. Given the significant overhead of CSI feedback, the AP need more reasonably utilization of this information to maximize the network performance. This leads to the system more complexity and hard to implement, which is opposite to what we think.

\emph{2) ESNR based Rate Estimation:} TOUSE's rate estimation method is based on theoretical MU-MIMO system scaling. In order to facilitation and precision, AP obtain the receivers' ESNR which is calculated by users, and estimate the data delivery rate by MCS-SNR table. Besides, we need quantify the influence to SNR by inter-user interference when AP transmitting to multi-users. As mentioned before, in ZF model, user only receives its desired symbol owing to the composite effects of precoding and channel distortion. The main features of ZF is complete interference cancellation with full CSI, but also caused the noise amplified \cite{liao2014mu}.

Many works \cite{yang2013performance} provide the analysis to network capacity performance impact by ZF-precoded system. But most of methods are not suitable for our purposes because require too much information. By the ZF criterion, there is residual interference because the beamformers are based on imperfect CSI. The SINR for selected user $k$ is (proposed in \cite{ravindran2012multi})
\begin{equation}\label{SINR_k}
  \textrm{SINR}_k= \frac{ \textrm{SNR}_k \|\boldsymbol{h}_k\|^2 \cos ^2{(\angle(\boldsymbol{h}_k, \boldsymbol{w}_k))}} {1+\textrm{SNR}_k \|\boldsymbol{h}_k\|^2 \sum _{j \neq k} \cos ^2 {(\angle(\boldsymbol{h}_k, \boldsymbol{w}_j))}}
\end{equation}
and the corresponding sum rate is $\sum_{k=1}^n \log _2 {(1+\textrm{SINR}_k)}$. Where $\boldsymbol{w}_k$ presents the precoding unit-norm beamforming vector for user $k$ is chosen in the direction of the projection of $\boldsymbol{h}_k$ on the nullspace of $\boldsymbol{h}_j$, $j\neq k$.

Eq. (\ref{SINR_k}) present SINR variation for each users, but there is the same problem of using information of CSI as input. As Eq. (\ref{SINR_k}) shows that the interference by other receivers in beamforming group is related to per-receiver SNR. Besides, the system state information also has great influence on the SINR, like transmit antennas number $M$ and the size of current transmit users group $K$. It is also necessary to note that this paper focuses on the user equipped with a single antennas. In \cite{jindal2006mimo} and \cite{ravindran2012multi}, it proved that in order to achieve the full multiplexing gain of $M$, the transmitter must have perfect channel knowledge in order to choose the zero-forcing beamforming vectors. However due to the imperfection in this knowledge, there inevitably will be some multi-user interference, which leads to performance degradation. Therefore, we proposed a suitable per-receiver SINR estimation method as following.
\begin{equation}\label{TOUSE_rate estimation}
\begin{split}
   \textrm{SINR}_k & = \frac{\textrm{ESNR}_k- \textrm{ESNR}_k \cdot 2^{-B}}   {1 + \textrm{ESNR}_k \cdot 2^{- B  }}        \\
   \\
   B & =((M-1)P)/ (3(K-1))
\end{split}
\end{equation}
Where $M$ is the number of transmit antennas, present the degree of freedom of MU-MIMO system. $K$ denote the number of size of beamforming group, which leads an exponential increase in the multi-user interference.

In TOUSE, we assume that each transmit antennas have a same transmit power $P$. From Eq. (\ref{TOUSE_rate estimation}), we know that the value of per-receiver SINR is inherently less precise than Eq. (\ref{traditional rate est}). But it can provides a sufficiently accurate result for TOUSE user selection process as well, and easy to implenment. Then we can get the transmit data rate $rate_k$ for user $k$ based on the SINR for each receivers from the MCS-Rate (Table \ref{MCS-SNR}).

\emph{3) TOUSE Rate Estimation Analyse:} In Eq. (\ref{TOUSE_rate estimation}), the TOUSE's SINR estimation method only requires the system hardware configurations $M$, number of users $K$ and the ESNR calculated by per-user. This estimation scheme can accommodate with the network dynamic by using ESNR, and avoid CSI feedback overhead at the same times. $2^{-B}$ presents the multiplexing gain of inter-user interference, and it increased linearly with the transmit power. Thus, MU-MIMO SINR should relatively with $B$.

During the rate estimation process, TOUSE first measure the channel state information, and calculate the ESNR by each receivers. We estimate the per-receiver SINR based on the size of beamforming group. Then the data delivery rate (for 90\% packet reception rate) is obtained by using the MCS-SNR table provided by the standard (as shown in Table \ref{MCS-SNR}).

\begin{table}[!hbp]
\centering
\caption{Minimum SNR required}
\label{MCS-SNR}
  \begin{tabular}{|c|c|c|}
  \hline
  MCS      &   Rate (Mbps)   &SNR (dB)\\
  \hline
  0         &   6.5     &     1.1      \\
  1         &   13.0    &     4.1  \\
  2         &   19.5    &     6.7  \\
  3         &   26.0    &     9.6  \\
  4         &   39.0    &     12.8  \\
  5         &   52.0    &     17.2\\
  6         &   58.5    &     18.4\\
  7         &   65.0    &     19.7\\
  \hline
  \end{tabular}

\end{table}



\subsection{User Selection Mechanism}

In this section, we present the user selection mechanism to maximum the aggregate throughput of network. To achieve this goal, we design two constraint conditions for optimal beamforming group selection. At the same time, we need to improve fairness of channel access for each users.

Previous section give the data rate estimation method. In order to calculate the data transmission time for a transport connection, key point is total delivery data and network overhead (such as channel sounding and ESNR feedback overhead). These pre-sounding information can obtain by AP queue state or network measurement. So we can calculate the total throughput $R$ for each transmission slot, which is the performance metric to user selection mechanism. It is formula as following, $L$ denote the total transmission data at a time slot, $T_s$ is the maximum transmission time of all transmission and $T_o$ is the network overhead.
\begin{equation}\label{aggregation throughput}
  R= L/(T_s+T_o).
\end{equation}

In order to achieve the two design goals: throughput increase and fairness ensures. We design a similarity matching algorithm for optimal user group selection based on dynamic time warping \cite{muller2007dynamic}. Before present time constraint condition, we would like to give some definition. First, $S=\{s_1,s_2,...,s_k \}$ denote the current selected beamforming group and $|S|$ is the size of $S$, $c$ denote a user which is candidate for $k+1$ solution from the unselected users, but still waiting for check by constraint condition. $T(c)$ present the transmission time requirement that AP transmit the queue data to user $c$. Here shown the first constraint condition : to maximum the aggregate throughput.
\begin{equation}\label{first constraint}
\begin{cases}
\frac {T(c)}{T(\max(S))} < \frac{1}{(ratio(c)-1)}& T(\max(S)) \leq T(c)\\
\\
\frac {T(\max(S))}{T(c)} < \frac{1}{(ratio(\max(S))-1)}& T(\max(S)) > T(c)
\end{cases}
\end{equation}
Where $\max(S)$ present the one with maximum data transmission time in selected group, $T(\max(S))= \max {(L_i/ rate_i)}$, $ i\in S $, $ratio(c)$ is the ratio between the datarata of user $c$ at the mode of $K=|S|$ and $K=|S|+1$. The size of beamforming group $K$ has a big impact on the transmitting rate of each user. For example, user $u$ from beamforming group
which the size is $K$, the transmission rate is $a$ , and rate equals $b$ in the mode of $K+1$, then $ratio(u)=a/b$. Eq. (\ref{first constraint}) is a throughput constraint for network capacity, judgement the benefit from user $c$ in this transmit time slot. Then we make choices whether put it into the beamforming group or just throw it away. As we talked before, increase the size of beamforming group leads to inter-user interference. So we should judge the total network throughput when put candidate user $c$ into beamforming group.

Next we give the other constraint to make full utilization of space-time resource.
\begin{equation}\label{second constraint}
  T(c)\leq \frac{M}{K} \cdot T(\max(S)).
\end{equation}
Where $K=|S|$ denote the size of beamforming group which is received transmit date from AP concurrently. This restriction allows our algorithm to find an optimal match between given transmission time of selected users. For example, in a transmit slot, AP transmit to \emph{user1} and \emph{user2}, while the transmission time of \emph{user1} is 1s and \emph{user2} is 100s. In this case, compared with \emph{user2}, the transmission time of \emph{user1} is to small, which is not a best choose to bind them together for total network.

Based on the idea of dynamic time warping, we make sure that find an optimal beamforming group which is benefit to the capacity of network by these restrictions. We selected user $c$ depend on the similarity of transmission time between candidate user $c$ and current beamforming group. We choose a first user in beamforming group at random, then we selected the other member of beamforming group which has similar transmission time with the first one. The selection process will go through the total unselected user until we find a solution or nothing, which means current
beamforming group is a optimal solution at a transmitting slot.

TOUSE user selection mechanism based on data transmission time, which means the contention is fairness in term of SNR of user. Next section will present the fairness performance of our mechanism. Eq. (\ref{aggregation throughput}) show that the network overhead limits the performance of a MU-MIMO transmission. Along with the increase of beamforming group size, the amount of total transmit data $L$ grows. The larger amount of network overhead is create meanwhile. So it is an important issue to get the trade off between of aggregate data and network overhead.
%\begin{figure}
%\begin{center}
%  \includegraphics[width=0.45\textwidth]{pic/2.eps}\\
%  \caption{A typical topology for illustrating how UPMAC works.}\label{2: A typical topology for illustrating how UPMAC works.}
%  %\vspace{-5mm}
%\end{center}
%\end{figure}

\subsection{TOUSE Algorithm}


\begin{algorithm}[htbp]              %算法的开始
\caption{TOUSE User Selection}      %算法标题
\label{user selection algorithm}    %算法标签，方便引用
\begin{algorithmic}[1]              %算法开始，[1]表示每一行显示算法步数
\REQUIRE ~~\\                        %算法的输入 ~~\\表示换行
The set of single antenna users, $C$;\\
The number of transmit antennas and transmit power, $M$ and $P$;
\OUTPUT ~~\\                         %算法的输出
The set of solution receivers, $S$;\\
The size of solution group, $k=|S|$;
\ENSURE ~~\\
\WHILE {$k \leq M$ and $ C \neq \emptyset$}
    \IF {$k=0$}
        \STATE Selecting a solution $s_1 \in C$ at randomly from $C$;
        \STATE $C = C - s_1 $, $S= S + s_1$;
    \ELSE
        \REPEAT
        \STATE Selecting a optimal receiver $c_k \in C$ matches $S$;
        \STATE Judging $c_k$ by two constraint: Eq. (\ref{first constraint}), Eq. (\ref{second constraint});
        \IF{$c_k$ satisfies the two constraint}
            \STATE $S=S+c_k$; $C=C-c_k$;
        \ENDIF
        \UNTIL Get the solution $s_k=c_k$ or none of optimal solution $s_k\notin C$ meets the condition;
    \ENDIF
    \IF {$s_k\notin C$}
        \STATE None of receiver $c\in C$ matches $S$;
        \STATE Break, //terminate the process of user selection;
    \ENDIF
\ENDWHILE \\
\end{algorithmic}
\end{algorithm}


In order to seek an optimal combination to improve the network capacity, TOUSE use the two constraints which is mentioned before. Given the set of candidate receivers $C=\{c_1,c_2,...,c_n \}$ which to contend for the transmission slot. TOUSE select the best combination as beamforming group for AP to simultaneous downlink transmissions. Here is the TOUSE user selection algorithm.


The algorithm (\ref{user selection algorithm}) shows our user selection process. Given the candidate set, TOUES output the solution as the beamforming group $S$, $|S|\leq M$. In the first round, we selecting a solution at random from candidate set, which is meet the require of competition fairness. The time constraint condition process is repeated until select a receiver to matching already solution group, or none of optimal solution in candidate receivers, as lines 6-12 in Algorithm 1. During the process of searching solution, we judge from the time closest receiver compared with solution set. This searching method was reduced the complexity of TOUSE and a optimum result was acquired rapidly and exactly.



\section{PERFORMANCE EVALUATION}
In this section, we further perform simulations to evaluate the performance of TOUSE in indoor environment. The simulations are aiming to answer the following questions:
\begin{itemize}
\item How much capacity gain can TOUSE achieve in comparison with existing schemes?
\item How does TOUSE perform in terms of fairness compared with existing schemes?
\item How much the number of transmit antennas impact on TOUSE?
\item Does TOUSE scale?
\item Could TOUSE work in different channel quality region?
\end{itemize}

For performance comparison, we implemented three state-of-the-art user selection schemes: (1) Pre-sounding User and Mode selection Algorithm (PUMA) \cite{anand2014mode}. PUMA allows MU-MIMO system to efficiently transmit multiple streams by using pre-sounding information. It estimates the throughput of all potential user group combinations.
(2) Mixed PUMA algorithm (PUMA-MIX). PUMA employed exhaustively searched to find the optimal user group. We replaced with our iteration method for comparison in simulations.
(3) Random User Selection (RUS), essentially the default standard of 802.11ac , which random select users with equal probability.

In our simulation, we randomly distribute the users around the AP. The channels are generated according to the rayleigh fading channel model, and we assume the transmit power of each antennas is $15W$. The default number of users is set to $10$, packet size is set to $1500$ bytes and the number of transmit antennas is $3$. The detailed setting will be specified in each simulation.

\subsection{Performance Comparison for Continuous Traffic}

\begin{figure}[t]
\centering
\includegraphics[width=3.1in]{image/CDF.pdf}
% where an .eps filename suffix will be assumed under latex,
% and a .pdf suffix will be assumed for pdflatex; or what has been declared
\DeclareGraphicsExtensions.
\caption{Performance comparison by total throughput}
\label{CDF}
\end{figure}

We evaluate the performance by comparing with other user selection schemes in terms of throughput gain. We set up a AP with 3 antennas and deploy 10 single-antenna users with randomly assignment of locations. Each of ten users have a different channel quality, and always have packets to receive. Before the transmission, AP obtain the queue information which is total transmit data to each candidate users. Then AP estimate the bit-rate of each concurrent packet based on the effective SNR which is calculated by each user.

Fig. \ref{CDF} plot the CDF of the total throughput in 3 antennas scenarios, and show the performance compared with other user selection schemes. The result shows that the traditional scheme, RUS, selecting users with an equal probability, without considering the channel characteristics and other criterion. Compared to RUS, the average throughput gain from enabling concurrent transmissions with TOUSE's user selection is about 50\% in three antennas scenarios. This improvement mainly benefits from the following contributions: First, accurate rate prediction mechanism ensures the high packet reception rate, and reduce the time overhead without CSI feedback. Second, full utilize concurrent transmission time by overhead time matches based mechanism. The figure also shows that the PUMA-MIX and PUMA produce a throughput comparable to or even slightly higher than our user selection scheme. The performance of PUMA-MIX is similar to TOUSE's because we replace its greedy selection with our scheduling algorithm. Although the PUMA perform slightly better than TOUSE and PUMA-MIX, it caused $10\times$ time overhead in the process of user selection than other two schemes. Besides, this time overhead is growing with the number of users. Next we will show that these scheme result in unfair resource sharing.





\subsection{Throughput Fairness Analysis}



In this section, we analyse the fairness of user selection opportunities in a three antenna AP scenario. In order to analyse the fairness of TOUSE, we need to compare the probability to be selected for each users, which have different throughput. we set that each users are located at a specific region, where has different channel quality. By such method, we deployed only five different throughput single-antenna user around the AP, and each user have packets to receive from AP. In the simulation, we set \emph{user1}, \emph{user4} with worst and best channel quality, respectively. We also have control group, \emph{user5} is random distributed around AP.



During the user selection process, the user group for downlink transmission was selected one after another. In the first round of simulation, TOUSE choose a lucky user randomly, which means that TOUSE enables all clients to get almost an equal probability to be selected first.
In order to present more convincing result, we plot in Fig. \ref{fairness performance} the number of the second selection opportunities obtained by each user over the total number of selection, which is the metric used to evaluate fairness. The figure show that both the RUS scheme and our TOUSE enable all users to get almost an equal probability to be the second selected user. This implies that TOUSE enables users to achieving a similar level of fairness compared with fair contention mechanism. The probability of \emph{user1} in TOUSE is slightly lower than other users. Because \emph{user1} located in a region with worst channel quality, lead to the lowest throughput. In PUMA and PUMA-MIX, it gave little chance to low-throughput users. The user who has higher value of SNR get more opportunities to be selected. Because these schemes selected concurrent transmit group just depend on throughput of each user.

\begin{figure}[t]
\centering
\includegraphics[width=3.1in]{image/fairness-2nd.pdf}
% where an .eps filename suffix will be assumed under latex,
% and a .pdf suffix will be assumed for pdflatex; or what has been declared
\DeclareGraphicsExtensions.
\caption{Fairness comparison in a 3-antenna AP scenario}
\label{fairness performance}
\end{figure}

\begin{figure}[h]
\centering
\includegraphics[width=3.2in]{image/fair-index.pdf}
% where an .eps filename suffix will be assumed under latex,
% and a .pdf suffix will be assumed for pdflatex; or what has been declared
\DeclareGraphicsExtensions.
\caption{Jain's fairness index versus the number of users for different user selection mechanism}
\label{Jain's fairness index}
\end{figure}


In order to display the performance of TOUSE more clear, we give one of the most relevant fairness indicators called Jain's fairness index (JFI) \cite{jain1984quantitative}. The defined as following.
\begin{equation}\label{Jain fairness index}
  JFI=\frac{[\sum^{N_u}_{u=1} X_u]^2}{N_u \sum^{N_u}_{u=1}[X_u]^2}.
\end{equation}
Where $N_u$ present the total number of users complete for channel, $X_u$ denote channel access times of user $u$ at some time. $JFI$ ranges from $1/N_u$ (only one user is served) to 1 (all users are served at the same chance). Fig. \ref{Jain's fairness index} plots the Jain's fairness index for TOUSE, PUMA-MIX, PUMA and RUS as a function of the number of users in a 3-antenna AP scenario. It is shown that the fairness performance of the proposed TOUSE clearly outperforms PUMA and almost close to the ideal case.






\subsection{Effect of Number of Transmit Antennas }


\begin{figure}[t]
\centering
\includegraphics[width=3in]{image/throughput-antenna.pdf}
% where an .eps filename suffix will be assumed under latex,
% and a .pdf suffix will be assumed for pdflatex; or what has been declared
\DeclareGraphicsExtensions.
\caption{Performance in different AP scenario}
\label{impact by Antenna number}
\end{figure}





Here we present the performance by the impact of number of transmit antennas on the throughput. In the simulation, we set that the number of transmit antennas at the AP varies from 2 to 8, and 30 users which randomly distributed around AP competed for the channel. Fig. \ref{impact by Antenna number} plots the performance of throughput. It shows that user selection is also important even for small scale MU-MIMO system, but it is more necessary for large scale system. Compared with these user selection schemes, all achieve a similar capacity gain, when the number of antennas increases. The ceiling of throughput is reached with the antennas number growing, due to a large amount of interference between with the inter-user. Besides, the result implies that increasing the number of paralled streams is not always the most efficient transmission scheme.
We will prove that whether the TOUSE perform scalability.


\subsection{Impact of Number of Users}

\begin{figure}[t]
\centering
\includegraphics[width=3.1in]{image/throughput-user.pdf}
% where an .eps filename suffix will be assumed under latex,
% and a .pdf suffix will be assumed for pdflatex; or what has been declared
\DeclareGraphicsExtensions.
\caption{Performance impact by number of users}
\label{Influence of users number}
\end{figure}

Here we evaluate the performance of TOUSE when the number of users varies from 5 to 50. We check the total network throughput gain increased by TOUSE when each users just have limited packet to received. In each simulation, the AP transmits concurrent queue packets to the matches user, and thereby the throughput is calculated based on the process of transmission.

We plot the Fig. \ref{Influence of users number} to presents the performance of scalable. The effect of increasing the number of user on TOUSE, PUMA and PUMA-MIX is relatively small, implies that the TOUSE is performance well even when the network scales up. Since the RUS does not consider the channel characteristics and packet queueing status of users, its total network capacity is poor. But its performance is also independent of the number of users. During this simulation, PUMA get higher throughput whatever the network scales up due to the exhaustively research compared with other schemes. But the total throughput of PUMA-MIX is similar to TOUSE, which means that our user selection have similar level of throughput with a throughput first contention mechanism.


\subsection{Performance in Different Channel Quality Region}

\begin{figure}[t]
\centering
\includegraphics[width=3in]{image/throughput-srn.pdf}
% where an .eps filename suffix will be assumed under latex,
% and a .pdf suffix will be assumed for pdflatex; or what has been declared
\DeclareGraphicsExtensions.
\caption{Performance in different channel quality region}
\label{Performacne in region}
\end{figure}
%低SNR区域，用户选择显得没那么重要。

In order to evaluate could TOUSE performs where the network has worst channel quality. We make several simulation which has different channel quality. In a low SNR region, the value of SNR just varies from 0 to 5dB, and varies from 15 to 20dB in a highest region. We set that the 10 users locate in a region with similar channel quality. Fig. \ref{Performacne in region} reveals that user selection mechanism is not so significant for MU-MIMO in a low SNR region. Because the interference is large enough to each users no matter what the combination of beamforming group. However, with higher link qualities, these user selection scheme which consider the channel characteristics of users performs obviously better than RUS. Figure also shows that the TOUSE causes a capacity improvement over RUS even in a low SNR region. Compared with PUMA and PUMA-MIX, TOUSE performs same level or slightly poor in mostly scenario. But TOUSE achieve a similar capacity gain with going better of the channel quality. Obviously, TOUSE can performance better in different channel quality regions.

\section{RELATED WORK}

Wireless standards like 802.11ac \cite{Gong2015advanced}, LTE \cite{deng2014wifi} have recently pushed toward the use of MU-MIMO for obtaining high-speed and high-throughput wireless communication. The work \cite{liao2014mu} present a study to random access based MAC mechanisms for MU-MIMO, and gives a survey and categorize to the most relevant MU-MIMO MAC proposals. It also identify key requirements for designing efficient MU-MIMO MAC protocols including de/pre-coding \cite{choi2004transmit} and scheduling schemes. The potential of MU-MIMO has been investigated both theoretically \cite{lee2013performance} and empirically \cite{aryafar2010design}, which studied pre-coding techniques, scheduling schemes and practical gain of MU-MIMO in various environments.

Substantial theoretical works \cite{lim2014performance} assumed that CSI is available and paid much attention on implementing low-complexity algorithms to approach the maximum throughput. Xie \emph{et al}., \cite{xie2014scalable} present scalable and adaptive user selection which requires several rounds of CSI feedback instead of gathering from all users. However, in reality, the vulnerabilities of CSI \cite{miller2012vulnerabilities} still exists due to its estimation methods, like time overhead. To avoid overwhelm the actual channel time spent on transmission, the schemes of user selection without CSI feedback was be proposed. The authors of \cite{zhou2015signpost} design an orthogonality evaluation mechanism which enables each user using its own CSI to speculate. But it is only applies to uplink MU-MIMO. In \cite{anand2014mode}, it proposed a method of user selection prior to channel sounding and exploits theoretical properties of MU-MIMO system to estimate datarate. PUMA achieves better performance in throughput, however, does not do well in respect of fairness.



%To avoid overwhelm the actual channel time spent on transmission, with the represent of Signpost[4], authors design an orthogonality evaluation mechanism which enables each user using its own CSI to speculate.  Thus, CSI feedback comes to zero without sacrifice time and frequency resources by realizing distributed user selection.  Furthermore, Anand et al in [5] implement PUMA, exploits theoretical properties of MU-MIMO system scaling by estimating SINR for a certain client and transforming it to an expected achievable datarate.  PUMA achieves better throughput than best-fixed policy, however, doesn’t do well in respect of fairness.%

Some other works focus on the scheduling scheme of user selection \cite{kuo2014leader}. Mostly \cite{huang2013user} either iteratively select a user that minimizes the interference, reduce the complexity \cite{ji2007low} or maximizes the aggregate throughput. In \cite{shen2015sieve}, a novel search and update strategy was be proposed for user selection. It design a knob to controls tradeoff between aggregate capacity and  computational complexity. The work \cite{ko2012multiuser} present a low complexity scheduling scheme using block diagonalization with chordal distance.


%SIEVE search works like a sieve that filters out those candidate combinations which could not perform optimal. Progressive update re-branch users and re-select combinations iteratively until reaching the last level of enumeration tree they built.

In addition, some experimental studies emerged, like \cite{zhang2013nemox}. Authors realizes netMIMO downlink transmission for large-scale wireless network. By organizing a network into clusters, it could manages interference with a decentralized channel-access algorithm, but environment is limited in static network since time-averaged CSI is used as input. In \cite{shen2014rate}, Shen \emph{et al.,} introduce TurboRate, client annotates its packets with single SNR and direction at the AP to obtain the optimal bit rate and could transmit concurrently. Now there are more conditions are considered, like mobility \cite{2016infocomres} or channel control \cite{control2015shep}. The exciting thing is that the team of Xinyu Zhang \cite{Practical2016zhxy} optimize MU-MIMO performance in 802.11ac commodity devices.

So far, there are three key point in MU-MIMO MAC protocol design: throughput, complexity and fairness \cite{esslaoui2012fair}. But most research only consider two or one of these point. TOUSE design a novel metric without CSI feedback benefit from \cite{ravindran2012multi}, and present a fair user selection mechanism based on overhead time matches.
\section{CONCLUSION}

In this paper, we have presented TOUSE, a scalable and fairness user selection scheme for downlink MU-MIMO. TOUSE is a proportional fair schedular usually considers both network capacity and fairness. In order to reducing time overhead, we adopts a novel per-user data-rate estimation method without any CSI feedback. TOUSE selected optimal beamforming group by dynamic time warping based mechanism, which make full use of concurrent transmitting time and achieve equal opportunity of channel contention. We have simulated TOUSE along with three other user selection schemes. Simulation shows that TOUSE achieve a $1.5\times$ throughput gain over traditional scheme in three antennas AP scenarios. and the similar level of fairness compared with fair contention mechanism. We also proved that TOUSE can always achieve similar performance of throughput compared with throughput contention schemes. More detail of QoS will be consider in our future work.

% conference papers do not normally have an appendix


% use section* for acknowledgment

\section*{Acknowledgment}

 This work is supported by Natural Science Foundation of China under Grants No. 61070181, No. 61272524 and No. 61202442 and the Fundamental Research Funds for the Central Universities. This work is also supported by the Fundamental Research Funds for the Central Universities under Grants No. DUT14ZD218 and No. DUT14QY29.







\section*{References}


%\cite{muller2007dynamic}


\bibliography{ref}

\end{document}
